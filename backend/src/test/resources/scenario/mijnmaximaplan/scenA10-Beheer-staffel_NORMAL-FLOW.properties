# Zie https://nl-sip.define.logica.com/wiki/Spade/Usage/ScenarioRunner voor meer uitleg.

# Scenario: 
# Normale scenario. 
# Task1: functioneel_beheerder kiest te wijzigen staffel en vult ingang van nieuwe versie v staffel
# Task2: hij selecteerd de regels die mee moeten in de nieuwe versie (nu enkel de 11de niet mee)
# Task3: hij wijzigt de regels van de nieuwe versie (nu enkel de 10de anders dan de vorige versie)

#IGNORE = true

# TESTSCRIPT
START_PROCESS 				   = beheer staffels, functioneel_beheerder_user

task01.CLAIM_NEXT_GROUP_TASK   = functioneel_beheerder, functioneel_beheerder_user
task01.gekozenStaffel = 1
task01.ingangsdatum = '01-02-2017'

task02.GET_NEXT_ASSIGNED_TASK   = functioneel_beheerder_user
task02.OUDE_REGELs = 11
task02.OUDE_REGELs[0]-c-geselecteerd = true
task02.OUDE_REGELs[1]-c-geselecteerd = true
task02.OUDE_REGELs[2]-c-geselecteerd = true
task02.OUDE_REGELs[3]-c-geselecteerd = true
task02.OUDE_REGELs[4]-c-geselecteerd = true
task02.OUDE_REGELs[5]-c-geselecteerd = true
task02.OUDE_REGELs[6]-c-geselecteerd = true
task02.OUDE_REGELs[7]-c-geselecteerd = true
task02.OUDE_REGELs[8]-c-geselecteerd = true
task02.OUDE_REGELs[9]-c-geselecteerd = true
task02.OUDE_REGELs[10]-c-geselecteerd = false

task03.GET_NEXT_ASSIGNED_TASK   = functioneel_beheerder_user
task03.OUDE_GESELECTEERDE_REGELs = 10
task03.OUDE_GESELECTEERDE_REGELs[0]-c-tot = 20
task03.OUDE_GESELECTEERDE_REGELs[0]-c-waarde = 5.26
task03.OUDE_GESELECTEERDE_REGELs[1]-c-tot = 25
task03.OUDE_GESELECTEERDE_REGELs[1]-c-waarde = 5.84
task03.OUDE_GESELECTEERDE_REGELs[2]-c-tot = 30
task03.OUDE_GESELECTEERDE_REGELs[2]-c-waarde = 6.79
task03.OUDE_GESELECTEERDE_REGELs[3]-c-tot = 35
task03.OUDE_GESELECTEERDE_REGELs[3]-c-waarde = 7.88
task03.OUDE_GESELECTEERDE_REGELs[4]-c-tot = 40
task03.OUDE_GESELECTEERDE_REGELs[4]-c-waarde = 9.13
task03.OUDE_GESELECTEERDE_REGELs[5]-c-tot = 45
task03.OUDE_GESELECTEERDE_REGELs[5]-c-waarde = 10.66
task03.OUDE_GESELECTEERDE_REGELs[6]-c-tot = 50
task03.OUDE_GESELECTEERDE_REGELs[6]-c-waarde = 12.41
task03.OUDE_GESELECTEERDE_REGELs[7]-c-tot = 55
task03.OUDE_GESELECTEERDE_REGELs[7]-c-waarde = 14.45
task03.OUDE_GESELECTEERDE_REGELs[8]-c-tot = 60
task03.OUDE_GESELECTEERDE_REGELs[8]-c-waarde = 17.01
task03.OUDE_GESELECTEERDE_REGELs[9]-c-tot = 66
task03.OUDE_GESELECTEERDE_REGELs[9]-c-waarde = 22.22

# EXPECTED RESULT
task03.FINAL = true
ASSERT_PROCESS_ROW_COUNT_01   	= STAFFELS, +1
ASSERT_PROCESS_ROW_COUNT_02   	= STAFFELREGELS, +10
# Er moet een bestaande STAFFEL zijn met de ingevoerde datum als geldigTot
ASSERT_PROCESS_VALUE_COUNT_10 = STAFFELS.geldigTot = '2017-02-01', +1
# Er moet een nieuwe STAFFEL zijn met de ingevoerde datum als geldigVan
ASSERT_PROCESS_VALUE_COUNT_11 = STAFFELS.geldigVan = '2017-02-01', +1
# Er mag op het einde natuurlijk nog steeds maar 1 versie zijn met een max datum
ASSERT_PROCESS_VALUE_COUNT_12 = STAFFELS.geldigTot = '2099-12-31', +0
ASSERT_PROCESS_VALUE_COUNT_21 = STAFFELREGELS.tot = 66, +1
ASSERT_PROCESS_VALUE_COUNT_22 = STAFFELREGELS.waarde = 22.22, +1

# SHOW CHANGED DATA
PRINT_TABLE_ROWS_01 = STAFFELS
PRINT_TABLE_ROWS_02 = STAFFELREGELS
